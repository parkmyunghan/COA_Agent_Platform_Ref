<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 4: LLM-based Reasoning (LLM ê¸°ë°˜ ì¶”ë¡ )</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: 'Malgun Gothic', 'Segoe UI', sans-serif;
            line-height: 1.6;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #1976D2;
            border-bottom: 3px solid #1976D2;
            padding-bottom: 10px;
        }

        h2 {
            color: #0288D1;
            margin-top: 30px;
            border-left: 4px solid #0288D1;
            padding-left: 10px;
        }

        h3 {
            color: #0277BD;
        }

        .diagram-container {
            background: #fafafa;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .step-box {
            background: #e3f2fd;
            border-left: 4px solid #1976D2;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .code-block {
            background: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            line-height: 1.5;
        }

        .prompt-box {
            background: #fff3cd;
            border: 2px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .info-box {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .warning-box {
            background: #ffebee;
            border-left: 4px solid #f44336;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #1976D2;
            color: white;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Consolas', monospace;
        }

        .highlight {
            background: #ffeb3b;
            padding: 2px 4px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ğŸ¤– Phase 4: LLM-based Reasoning (LLM ê¸°ë°˜ ì¶”ë¡ )</h1>

        <div class="info-box">
            <strong>Phase ê°œìš”</strong><br />
            Phase 3ì—ì„œ ì‚°ì •í•œ ì •ëŸ‰ì  ì ìˆ˜ì— **ìì—°ì–´ ê¸°ë°˜ ì¶”ë¡ **ì„ ì¶”ê°€í•˜ì—¬ ë°©ì±… ì¶”ì²œì˜ ì„¤ëª… ê°€ëŠ¥ì„±(Explainability)ì„ í™•ë³´í•©ë‹ˆë‹¤.
            LLMì€ ë‘ ê°€ì§€ ì‹œì ì—ì„œ í™œìš©ë©ë‹ˆë‹¤:
            <ol>
                <li><strong>Phase 2 í›„ë°˜</strong>: ìƒí™© ë¶„ì„ ì‹œ ì „ìˆ ì  ì¸ì‚¬ì´íŠ¸ ì¶”ì¶œ</li>
                <li><strong>Phase 3 í›„ë°˜</strong>: ë°©ì±…ë³„ ë¶€ëŒ€ ìš´ìš© ê·¼ê±° ë° íƒìƒ‰ ê³¼ì • ì„¤ëª…</li>
            </ol>
        </div>

        <h2>ğŸ”„ ì „ì²´ í”„ë¡œì„¸ìŠ¤ íë¦„</h2>
        <div class="diagram-container">
            <div class="mermaid">
                graph TB
                Start([Phase 4 ì‹œì‘]) --> Branch{LLM í™œìš©<br />ì§€ì }

                Branch -->|Phase 2| Situation[A. ìƒí™© ë¶„ì„ LLM<br />_llm_analyze_situation]
                Branch -->|Phase 3| Adaptation[B. ë°©ì±… êµ¬ì²´í™” LLM<br />_adapt_coas_with_llm]

                Situation --> SitPrompt[í”„ë¡¬í”„íŠ¸ ì‘ì„±<br />ìƒí™© ì •ë³´ í…ìŠ¤íŠ¸í™”]
                SitPrompt --> SitLLM[LLM í˜¸ì¶œ<br />gemini-1.5-flash-002]
                SitLLM --> SitParse[JSON ì‘ë‹µ íŒŒì‹±]
                SitParse --> SitResult{íŒŒì‹± ì„±ê³µ?}

                SitResult -->|ì„±ê³µ| ExtractInsights[ì¸ì‚¬ì´íŠ¸ ì¶”ì¶œ<br />key_factors, constraints]
                SitResult -->|ì‹¤íŒ¨| Fallback1[í´ë°±: ê¸°ë³¸ êµ¬ì¡° ë°˜í™˜]

                ExtractInsights --> MergePhase2[Phase 2 ê²°ê³¼ì—<br />LLM ì¸ì‚¬ì´íŠ¸ ë³‘í•©]
                Fallback1 --> MergePhase2

                Adaptation --> TopN[Top-N COA<br />ë³‘ë ¬ ì²˜ë¦¬]
                TopN --> COAPrompt[COAë³„ í”„ë¡¬í”„íŠ¸ ì‘ì„±<br />ë¶€ëŒ€ ìš´ìš© ì„¤ëª… ìš”ì²­]
                COAPrompt --> COALLM[LLM í˜¸ì¶œ<br />ë³‘ë ¬ ì‹¤í–‰ max 5]
                COALLM --> COAParse[ì‘ë‹µ íŒŒì‹±<br />ìš´ìš©ê·¼ê±°/íƒìƒ‰ê³¼ì •]
                COAParse --> COAResult{íŒŒì‹± ì„±ê³µ?}

                COAResult -->|ì„±ê³µ| EnrichCOA[COA ê°ì²´ì—<br />unit_rationale, system_search_path ì¶”ê°€]
                COAResult -->|ì‹¤íŒ¨| Fallback2[í´ë°±: ê¸°ë³¸ ë¬¸êµ¬]

                EnrichCOA --> Output([Phase 4 ì™„ë£Œ<br />ì„¤ëª… ê°€ëŠ¥í•œ ì¶”ì²œ])
                Fallback2 --> Output
                MergePhase2 -.->|ì»¨í…ìŠ¤íŠ¸ ì œê³µ| COAPrompt

                style Start fill:#4CAF50,color:#fff
                style Output fill:#2196F3,color:#fff
                style SitLLM fill:#FF9800,color:#fff
                style COALLM fill:#9C27B0,color:#fff
            </div>
        </div>

        <h2>ğŸ“‹ LLM í™œìš© ì‹œë‚˜ë¦¬ì˜¤</h2>

        <div class="step-box">
            <h3>A. ìƒí™© ë¶„ì„ LLM (Phase 2 í†µí•©)</h3>
            <p><strong>í•¨ìˆ˜</strong>: <code>_llm_analyze_situation(situation_info, user_query)</code></p>
            <p><strong>ëª©ì </strong>: êµ¬ì¡°í™”ëœ ë°ì´í„°ë§Œìœ¼ë¡œëŠ” í‘œí˜„í•˜ê¸° ì–´ë ¤ìš´ ì „ìˆ ì  ë§¥ë½ê³¼ ì œì•½ì‚¬í•­ì„ ìì—°ì–´ë¡œ ì´í•´</p>

            <h4>í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿</h4>
            <div class="prompt-box">
                ë‹¤ìŒ ìƒí™©ì„ ë¶„ì„í•˜ì„¸ìš”:

                [ìƒí™© ì •ë³´]
                ìœ„í˜‘ìœ í˜•: Air Assault
                ì‹¬ê°ë„: 0.85
                ë°œìƒìœ„ì¹˜: CELL_A3
                ê´€ë ¨ë¶€ëŒ€: 1ëŒ€ëŒ€, 2ì¤‘ëŒ€

                ì‚¬ìš©ì ì§ˆë¬¸: [ì‚¬ìš©ì ì…ë ¥]

                ë‹¤ìŒì„ ë¶„ì„í•´ì£¼ì„¸ìš”:
                1. ìœ„í˜‘ì˜ í•µì‹¬ íŠ¹ì„± ë° ì‹¬ê°ë„
                2. ìƒí™©ì˜ ë§¥ë½ ë° ë°°ê²½
                3. ì£¼ìš” ê³ ë ¤ì‚¬í•­ ë° ì œì•½ì¡°ê±´
                4. ê¶Œì¥ ì ‘ê·¼ ë°©ì‹

                JSON í˜•ì‹ìœ¼ë¡œ ë‹µë³€:
                {
                "threat_assessment": {
                "severity": "High/Medium/Low",
                "key_characteristics": ["íŠ¹ì„±1", "íŠ¹ì„±2"],
                "urgency": 0.0-1.0
                },
                "context": "ìƒí™©ì˜ ë§¥ë½ ì„¤ëª…",
                "insights": {
                "key_factors": ["ìš”ì¸1", "ìš”ì¸2"],
                "constraints": ["ì œì•½1", "ì œì•½2"],
                "recommended_approach": "ì ‘ê·¼ ë°©ì‹ ì„¤ëª…"
                }
                }
            </div>

            <h4>LLM íŒŒë¼ë¯¸í„°</h4>
            <div class="code-block">
                response = llm_manager.generate(
                prompt,
                max_tokens=512,
                temperature=0.0, # ì¼ê´€ì„± ì¤‘ì‹œ
                do_sample=False
                )
            </div>

            <h4>ì‘ë‹µ ì²˜ë¦¬</h4>
            <div class="code-block">
                # JSON íŒŒì‹± ì‹œë„
                json_start = response.find('{')
                json_end = response.rfind('}') + 1
                json_text = response[json_start:json_end]
                llm_result = json.loads(json_text)

                # ì„±ê³µ ì‹œ: situation_analysisì— ë³‘í•©
                situation_info['llm_key_factors'] = llm_result['insights']['key_factors']
                situation_info['llm_constraints'] = llm_result['insights']['constraints']

                # ì‹¤íŒ¨ ì‹œ: ê¸°ë³¸ êµ¬ì¡° ë°˜í™˜ (ë¹ˆ ë¦¬ìŠ¤íŠ¸, ì¤‘ê°„ ì‹¬ê°ë„)
            </div>
        </div>

        <div class="step-box">
            <h3>B. ë°©ì±… êµ¬ì²´í™” LLM (Phase 3 í›„ë°˜)</h3>
            <p><strong>í•¨ìˆ˜</strong>: <code>_adapt_coas_with_llm(recommendations, situation_info

)</code></p>
            <p><strong>ëª©ì </strong>: ë°©ì±…ë³„ ë¶€ëŒ€ ë°°ì¹˜ì˜ ì´ìœ ì™€ ì‹œìŠ¤í…œ íƒìƒ‰ ê³¼ì •ì„ ì„¤ëª… (Process Transparency)</p>

            <h4>í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿</h4>
            <div class="prompt-box">
                ë‹¹ì‹ ì€ ì‘ì „ ì°¸ëª¨ì´ì ì‹œìŠ¤í…œ ì„¤ê³„ìì…ë‹ˆë‹¤. ë‹¤ìŒ ë°©ì±…(COA)ì— í• ë‹¹ëœ ë¶€ëŒ€(Resource)ì˜ ì„ ì • ê·¼ê±°ì™€ ì‹œìŠ¤í…œì  íƒìƒ‰ ê³¼ì •ì„ ì§€íœ˜ê´€ì—ê²Œ ì„¤ëª…í•˜ì„¸ìš”.

                [ìƒí™© ì •ë³´]
                ìœ„í˜‘: Air Assault, ìˆ˜ì¤€: 0.85, í™˜ê²½: ì‚°ì•…ì§€í˜•, ì êµ°: í—¬ê¸°ë¶€ëŒ€

                [ì„ íƒëœ ë°©ì±…]
                ëª…ì¹­: ê³µì¤‘ ê¸°ë™ ë°©ì–´

                [í• ë‹¹ëœ ì•„êµ° ë¶€ëŒ€/ìì‚°]
                ê³µë³‘ëŒ€ëŒ€, ëŒ€ê³µí¬ëŒ€, í†µì‹ ì¤‘ëŒ€

                ë‹¤ìŒ ë‘ ê°€ì§€ í•­ëª©ì„ êµ°ì‚¬ì  ì „ë¬¸ì„±ê³¼ ì‹œìŠ¤í…œì  íˆ¬ëª…ì„±ì„ ë‹´ì•„ í•œê¸€ë¡œ ì‘ì„±í•˜ì„¸ìš”:
                1. ë¶€ëŒ€ ìš´ìš© ê·¼ê±° (Unit Rationale): ì„ íƒëœ ë¶€ëŒ€(ì˜ˆ: ê³µë³‘ëŒ€ëŒ€ ë“±)ê°€ ì´ ì‘ì „ì—ì„œ ì™œ í•„ìš”í•œì§€, ì–´ë–¤ ì „ìˆ ì  ê¸°ì—¬ë¥¼ í•˜ëŠ”ì§€ ì„¤ëª… (2~3ë¬¸ì¥)
                2. ì‹œìŠ¤í…œ íƒìƒ‰ ê³¼ì • (Search Path): ì—ì´ì „íŠ¸ê°€ ì§€ì‹ ê·¸ë˜í”„(Knowledge Graph)ì—ì„œ ì´ ë¶€ëŒ€ë¥¼ ì–´ë–»ê²Œ ì°¾ì•„ëƒˆëŠ”ì§€ ì„¤ëª… (1~2ë¬¸ì¥)

                ì‘ë‹µ í˜•ì‹:
                [ìš´ìš©ê·¼ê±°]
                ...

                [íƒìƒ‰ê³¼ì •]
                ...
            </div>

            <h4>LLM íŒŒë¼ë¯¸í„°</h4>
            <div class="code-block">
                response = llm_manager.generate(
                prompt,
                temperature=0.1, # ì•½ê°„ì˜ ì°½ì˜ì„± í—ˆìš©
                max_tokens=512
                )
            </div>

            <h4>ë³‘ë ¬ ì²˜ë¦¬ ë¡œì§</h4>
            <div class="code-block">
                from concurrent.futures import ThreadPoolExecutor, wait

                with ThreadPoolExecutor(max_workers=min(len(recommendations), 5)) as executor:
                futures = [executor.submit(adapt_coa, rec) for rec in recommendations]
                wait(futures) # ëª¨ë“  ì‘ì—… ì™„ë£Œ ëŒ€ê¸°
            </div>

            <h4>ì‘ë‹µ íŒŒì‹± (ì •ê·œí‘œí˜„ì‹)</h4>
            <div class="code-block">
                import re

                # [ìš´ìš©ê·¼ê±°] ì„¹ì…˜ ì¶”ì¶œ
                rat_match = re.search(r'\[ìš´ìš©ê·¼ê±°\](.*?)(?=\[íƒìƒ‰ê³¼ì •\]|$)', text, re.S)

                # [íƒìƒ‰ê³¼ì •] ì„¹ì…˜ ì¶”ì¶œ
                path_match = re.search(r'\[íƒìƒ‰ê³¼ì •\](.*?)$', text, re.S)

                if rat_match:
                coa_item['unit_rationale'] = rat_match.group(1).strip()

                if path_match:
                coa_item['system_search_path'] = path_match.group(1).strip()
            </div>

            <h4>í´ë°± ë©”ì»¤ë‹ˆì¦˜</h4>
            <p>LLM í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ ë¬¸êµ¬ ì‚¬ìš©:</p>
            <div class="code-block">
                # ê¸°ë³¸ê°’ (Fallback)
                coa_item['unit_rationale'] = f"'{coa_name}' ì‘ì „ì˜ ì„±ê³µì ì¸ ìˆ˜í–‰ì„ ìœ„í•´ ê°€ìš© ìì›ì„ ìµœì í™”í•˜ì—¬ í• ë‹¹í•˜ì˜€ìŠµë‹ˆë‹¤."
                coa_item['system_search_path'] = "Defense Ontologyì˜ ìì‚°-ì„ë¬´ ì—°ê´€ì„± ë¶„ì„ì„ í†µí•´ ë„ì¶œë¨."
            </div>
        </div>

        <h2>ğŸ› ï¸ LLM í†µí•© ì•„í‚¤í…ì²˜</h2>
        <table>
            <thead>
                <tr>
                    <th>ì»´í¬ë„ŒíŠ¸</th>
                    <th>ì—­í• </th>
                    <th>íŒŒì¼ ìœ„ì¹˜</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>LLM Manager</td>
                    <td>LLM API í˜¸ì¶œ ë° ì‘ë‹µ ê´€ë¦¬</td>
                    <td><code>core_pipeline/llm_manager.py</code></td>
                </tr>
                <tr>
                    <td>Prompt Builder</td>
                    <td>ìƒí™© ì •ë³´ â†’ í”„ë¡¬í”„íŠ¸ ë³€í™˜</td>
                    <td><code>_format_situation_for_llm()</code></td>
                </tr>
                <tr>
                    <td>Response Parser</td>
                    <td>JSON/í…ìŠ¤íŠ¸ íŒŒì‹± ë° ì˜¤ë¥˜ ì²˜ë¦¬</td>
                    <td>ê° LLM í˜¸ì¶œ í•¨ìˆ˜ ë‚´ë¶€</td>
                </tr>
                <tr>
                    <td>Fallback Handler</td>
                    <td>LLM ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ê°’ ì œê³µ</td>
                    <td>ê° í•¨ìˆ˜ì˜ try-except ë¸”ë¡</td>
                </tr>
            </tbody>
        </table>

        <h2>ğŸ“Š LLM ì„¤ì • ë° ëª¨ë¸</h2>
        <div class="info-box">
            <h3>í˜„ì¬ ì‚¬ìš© ëª¨ë¸</h3>
            <ul>
                <li><strong>ëª¨ë¸ëª…</strong>: <code>gemini-1.5-flash-002</code> (configì—ì„œ ì„¤ì •)</li>
                <li><strong>Provider</strong>: Google Gemini API</li>
                <li><strong>ì„ íƒ ì´ìœ </strong>:
                    <ul>
                        <li>ë¹ ë¥¸ ì‘ë‹µ ì†ë„ (Flash ëª¨ë¸)</li>
                        <li>í•œê¸€ ì§€ì› ìš°ìˆ˜</li>
                        <li>JSON êµ¬ì¡°í™” ì‘ë‹µ ê°€ëŠ¥</li>
                    </ul>
                </li>
            </ul>
        </div>

        <h2>âš¡ ì„±ëŠ¥ ìµœì í™”</h2>
        <div class="step-box">
            <h3>ë³‘ë ¬ ì²˜ë¦¬ ì „ëµ</h3>
            <p>ë°©ì±… êµ¬ì²´í™” LLMì€ <strong>ë³‘ë ¬ ì‹¤í–‰</strong>ìœ¼ë¡œ ì²˜ë¦¬ ì‹œê°„ ë‹¨ì¶•:</p>
            <ul>
                <li><code>max_workers=5</code>: ë™ì‹œì— ìµœëŒ€ 5ê°œ COA ì²˜ë¦¬</li>
                <li>Top-3 ì¶”ì²œë§Œ ì²˜ë¦¬í•˜ë¯€ë¡œ í‰ê·  ì‹¤í–‰ ì‹œê°„ ~2ì´ˆ</li>
                <li>ê° COAëŠ” ë…ë¦½ì ìœ¼ë¡œ ì²˜ë¦¬ ê°€ëŠ¥ (ìƒíƒœ ê³µìœ  ì—†ìŒ)</li>
            </ul>
        </div>

        <h2>ğŸ” ì˜ˆì‹œ: LLM ì‘ë‹µ ìƒ˜í”Œ</h2>
        <div class="step-box">
            <h3>A. ìƒí™© ë¶„ì„ ì‘ë‹µ</h3>
            <div class="code-block">
                {
                "threat_assessment": {
                "severity": "High",
                "key_characteristics": [
                "ê³µì¤‘ ê¸°ë™ì„±",
                "ì‹ ì†í•œ ì¹¨íˆ¬ ê°€ëŠ¥",
                "ì•¼ê°„ ì‘ì „ ìš°ë ¤"
                ],
                "urgency": 0.9
                },
                "context": "ì  í—¬ê¸°ë¶€ëŒ€ì˜ ê¸°ìŠµ ê³µê²© ê°€ëŠ¥ì„±ì´ ë†’ì€ ìƒí™©ìœ¼ë¡œ, ëŒ€ê³µ ë°©ì–´ì²´ê³„ ì¦‰ì‹œ ê°€ë™ í•„ìš”",
                "insights": {
                "key_factors": [
                "ëŒ€ê³µ í™”ê¸° ë°°ì¹˜ ìƒíƒœ",
                "ì¡°ê¸° ê²½ë³´ ì‹œìŠ¤í…œ ê°€ë™ ì—¬ë¶€",
                "ì•„êµ° ê¸°ë™ ì˜ˆë¹„ëŒ€ ìœ„ì¹˜"
                ],
                "constraints": [
                "ì•¼ê°„ ì‹œê³„ ì œí•œ",
                "ì‚°ì•… ì§€í˜•ìœ¼ë¡œ ì¸í•œ ë ˆì´ë” ìŒì˜ êµ¬ì—­",
                "í†µì‹  ì¬ë° ìš°ë ¤"
                ],
                "recommended_approach": "ë°©ì–´ì  ëŒ€ì‘ì„ ê¸°ë³¸ìœ¼ë¡œ í•˜ë˜, ëŒ€ê³µí¬ ë° íœ´ëŒ€ìš© ëŒ€ê³µë¯¸ì‚¬ì¼ ìš°ì„  ë°°ì¹˜"
                }
                }
            </div>
        </div>

        <div class="step-box">
            <h3>B. ë°©ì±… êµ¬ì²´í™” ì‘ë‹µ</h3>
            <div class="code-block">
                [ìš´ìš©ê·¼ê±°]
                ê³µë³‘ëŒ€ëŒ€ëŠ” ì‹ ì†í•œ ë°©ì–´ì§„ì§€ êµ¬ì¶• ë° ì¥ì• ë¬¼ ì„¤ì¹˜ë¥¼ ë‹´ë‹¹í•˜ì—¬ ì  í—¬ê¸°ì˜ ì°©ë¥™ ì§€ì ì„ ì œí•œí•©ë‹ˆë‹¤.
                ëŒ€ê³µí¬ëŒ€ëŠ” ì§ì ‘ì ì¸ ê³µì¤‘ ìœ„í˜‘ ëŒ€ì‘ì˜ í•µì‹¬ ì „ë ¥ìœ¼ë¡œ, ì  í—¬ê¸° ì ‘ê·¼ ì‹œ ì¦‰ê° íƒ€ê²©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
                í†µì‹ ì¤‘ëŒ€ëŠ” ì¡°ê¸° ê²½ë³´ ë° ë¶€ëŒ€ ê°„ í˜‘ì¡°ë¥¼ ìœ„í•œ í†µì‹ ë§ ìœ ì§€ë¥¼ ë³´ì¥í•©ë‹ˆë‹¤.

                [íƒìƒ‰ê³¼ì •]
                ì‹œìŠ¤í…œì€ ì§€ì‹ ê·¸ë˜í”„ì—ì„œ 'ê³µì¤‘ ìœ„í˜‘(Air Threat)' ë…¸ë“œì™€ 'countersThreat' ê´€ê³„ë¡œ ì—°ê²°ëœ
                ìì‚°(Asset) ì—”í‹°í‹°ë¥¼ íƒìƒ‰í•˜ì˜€ê³ , 'locatedIn' ê´€ê³„ë¥¼ í†µí•´ í•´ë‹¹ ì „ì¥ êµ¬ì—­ ë‚´ ë°°ì¹˜ëœ
                ê³µë³‘ëŒ€ëŒ€, ëŒ€ê³µí¬ëŒ€, í†µì‹ ì¤‘ëŒ€ë¥¼ ì¶”ì¶œí•˜ì˜€ìŠµë‹ˆë‹¤.
            </div>
        </div>

        <h2>ğŸ“‚ ì½”ë“œ ì°¸ì¡°</h2>
        <table>
            <thead>
                <tr>
                    <th>íŒŒì¼</th>
                    <th>ì£¼ìš” í•¨ìˆ˜</th>
                    <th>ë¼ì¸</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>logic_defense_enhanced.py</td>
                    <td><code>_llm_analyze_situation()</code></td>
                    <td>3132-3220</td>
                </tr>
                <tr>
                    <td>logic_defense_enhanced.py</td>
                    <td><code>_adapt_coas_with_llm()</code></td>
                    <td>698-762</td>
                </tr>
                <tr>
                    <td>logic_defense_enhanced.py</td>
                    <td><code>_format_situation_for_llm()</code></td>
                    <td>~3230 (ì¶”ì •)</td>
                </tr>
                <tr>
                    <td>llm_manager.py</td>
                    <td><code>generate(prompt, ...)</code></td>
                    <td>-</td>
                </tr>
            </tbody>
        </table>

        <h2>âœ… ê²€ì¦ í¬ì¸íŠ¸</h2>
        <div class="warning-box">
            <h3>Phase 4 í’ˆì§ˆ í™•ë³´ ì²´í¬ë¦¬ìŠ¤íŠ¸</h3>
            <ol>
                <li><strong>í”„ë¡¬í”„íŠ¸ ëª…í™•ì„±</strong>: ìš”ì²­ ë‚´ìš©ì´ ëª…í™•í•˜ê³  êµ¬ì²´ì ì¸ì§€</li>
                <li><strong>ì‘ë‹µ íŒŒì‹± ì•ˆì •ì„±</strong>: JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ í´ë°±ì´ ì‘ë™í•˜ëŠ”ì§€</li>
                <li><strong>LLM ê°€ìš©ì„± ì²´í¬</strong>: LLM ì„œë¹„ìŠ¤ ì¥ì•  ì‹œ ì‹œìŠ¤í…œì´ ì¤‘ë‹¨ë˜ì§€ ì•ŠëŠ”ì§€</li>
                <li><strong>ì‘ë‹µ í’ˆì§ˆ</strong>: ìƒì„±ëœ ì„¤ëª…ì´ êµ°ì‚¬ì ìœ¼ë¡œ íƒ€ë‹¹í•˜ê³  ì´í•´ ê°€ëŠ¥í•œì§€</li>
                <li><strong>ì„±ëŠ¥</strong>: ë³‘ë ¬ ì²˜ë¦¬ê°€ ì •ìƒ ì‘ë™í•˜ë©° ì‘ë‹µ ì‹œê°„ì´ í—ˆìš© ë²”ìœ„ ë‚´ì¸ì§€</li>
                <li><strong>ë³´ì•ˆ</strong>: ë¯¼ê° ì •ë³´ê°€ LLM í”„ë¡¬í”„íŠ¸ì— í¬í•¨ë˜ì§€ ì•ŠëŠ”ì§€</li>
            </ol>
        </div>

        <h2>ğŸ¯ LLM í™œìš©ì˜ í•µì‹¬ ê°€ì¹˜</h2>
        <div class="info-box">
            <h3>1. ì„¤ëª… ê°€ëŠ¥ì„± (Explainability)</h3>
            <p>ë‹¨ìˆœ ì ìˆ˜ë§Œìœ¼ë¡œëŠ” ì „ë‹¬í•˜ê¸° ì–´ë ¤ìš´ <strong>"ì™œ ì´ ë°©ì±…ì¸ê°€?"</strong>ì— ëŒ€í•œ ë‹µì„ ìì—°ì–´ë¡œ ì œê³µ</p>

            <h3>2. í”„ë¡œì„¸ìŠ¤ íˆ¬ëª…ì„± (Process Transparency)</h3>
            <p>ì‹œìŠ¤í…œì´ ì–´ë–»ê²Œ ë¶€ëŒ€ë¥¼ ì°¾ê³  í• ë‹¹í–ˆëŠ”ì§€ <strong>íƒìƒ‰ ê²½ë¡œ</strong>ë¥¼ ì„¤ëª…í•˜ì—¬ ì‹ ë¢°ì„± í™•ë³´</p>

            <h3>3. ì‚¬ìš©ì ê²½í—˜ ê°œì„ </h3>
            <p>ì§€íœ˜ê´€ì´ ì˜ì‚¬ê²°ì •ì— í•„ìš”í•œ <strong>ë§¥ë½(Context)</strong>ê³¼ <strong>ì œì•½ì‚¬í•­(Constraints)</strong>ì„ ëª…ì‹œì ìœ¼ë¡œ ì œê³µ</p>
        </div>

        <h2>ğŸ”— Next Phase</h2>
        <p><strong>Phase 5: Final Recommendation</strong>ìœ¼ë¡œ ì´ë™</p>
        <p>LLMìœ¼ë¡œ ê°•í™”ëœ Top-3 COAë¥¼ ìµœì¢… ë­í‚¹í•˜ê³ , UI ì¶œë ¥ í˜•ì‹ìœ¼ë¡œ í¬ë§·íŒ…í•©ë‹ˆë‹¤.</p>
    </div>
    <script>
        mermaid.initialize({ startOnLoad: true, theme: 'default' });
    </script>
</body>

</html>