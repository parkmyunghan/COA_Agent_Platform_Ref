# 🛡️ 전술상황도(COP) 시각화 가이드

이 문서는 Intelligent Operation Agent Platform의 전술상황도(Common Operational Picture, COP) 시각화 기능에 대해 설명합니다.

## 🗺️ 시각화 개요

시스템은 에이전트가 분석한 **논리적 데이터**(위협 명칭, 방책 유형 등)를 **물리적 좌표 및 심볼**(GeoJSON, Milsymbol)로 변환하여 지도상에 전시합니다.

### 주요 기능
- **위협 시각화**: 적군 유닛의 위치(심볼) 및 위협 반경(반투명 원) 표시.
- **방책(COA) 시각화**: 아군 대응 부대 배치 및 작전 기동 경로(화살표/점선) 표시.
- **표준 심볼 사용**: MIL-STD-2525D(Milsymbol) 규격에 따른 군사 기호 적용.
- **오프라인 맵 엔진**: PBF 기반의 로컬 벡터 지도를 사용하여 폐쇄망 환경 지원.

## 🔍 데이터 매핑 원리 (`ScenarioMapper`)

`ScenarioMapper` 클래스는 다음과 같은 규칙으로 데이터를 처리합니다.

1.  **위치 매핑**: 위협 명칭이나 설명에 포함된 지명(예: 평양, 개성, 철원 등)을 인식하여 사전에 정의된 좌표에 배치합니다.
2.  **심볼 할당**: 위협 유형(미사일, 기갑, 포병 등)에 따라 적절한 Red 심볼을 부여합니다.
3.  **방책 연동**: 선택된 방책의 특성에 따라 아군 부대의 출발지와 작전 경로를 생성합니다.
    - *공격/선제타격*: 공군 기지에서 출발하는 진입 경로.
    - *방어/기동*: DMZ 인근 지상군 기동 경로.
    - *억제*: 미사일 부대 전개.

## 🚀 사용 방법

1.  **Agent 실행 페이지**로 이동합니다.
2.  좌측 패널에서 위협 상황을 입력하거나 기존 시나리오를 선택합니다.
3.  **"방책 추천 실행"** 버튼을 누릅니다.
4.  우측 분석 결과 섹션의 **"🗺️ 전술 상황도 (COP)"** 아코디언을 열어 시각화된 작전 계획을 확인합니다.

> [!TIP]
> 지도가 표시되지 않거나 배경이 검은색인 경우, `python scripts/serve_offline_map.py`가 실행 중인지 확인하고, `data/maps/korea_osm.geojson` 파일이 존재하는지 체크하세요.
