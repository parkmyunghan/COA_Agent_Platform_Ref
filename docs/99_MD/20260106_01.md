# RAG 기반 교리·교범 활용 및 추가 고려사항 점검 요청

## 1. 요청 목적
본 요청은 기존에 구현된 **RDF/OWL 기반 지식그래프 + METT-C 요소 + RAG 기능이 포함된 파일럿 시스템**을 분석한 후,
C4I 지휘결심 지원(방책 추천, COA Agent) 관점에서 다음을 수행하기 위함이다.

- 교리·교범·작전절차는 **RAG 중심으로 활용**하는 구조가 적합한지 검증
- 기존 RAG 문서를 분석하여 **교리/교범 지식을 가상 생성·보강하는 방식의 타당성 검토**
- METT-C 외 추가 고려 요소 중 **RAG로 대체 가능한 영역과 구조화(Ontology/DB)가 필요한 영역 구분**
- COA 추천 정확도·설명가능성·확장성을 저해하는 중복 구조 제거

---

## 2. 현재 시스템 전제 조건 (이미 반영된 사항)

### 2.1 구현 완료 또는 반영된 요소
- RDF/OWL 기반 스키마 그래프 및 인스턴스 그래프 생성
- SPARQL 기반 질의 및 추론 로직
- Excel/DB 기반 전장 데이터 로딩
- METT-C 요소 반영
  - Mission / Enemy / Terrain / Troops / Time / Civil
- COA 후보 생성 및 점수 산정 기본 구조
- Graphviz 기반 지식그래프 시각화
- **RAG 기능 구현**
  - 교리·교범·작전지침·규정 문서 벡터화
  - LLM 응답 시 관련 문서 검색·참조 가능

---

## 3. 교리·교범 처리 원칙 (중요 전제)

### 3.1 교리·교범은 RAG 중심으로 활용
다음 영역은 **온톨로지/DB에 직접 하드코딩하지 않고 RAG로 처리하는 것을 기본 원칙**으로 한다.

- 작전 교리
- 전술 운용 원칙
- 부대 운용 기준
- 작전 절차 설명(MDMP, 작전단계 등)
- 교범 내 서술형 판단 기준

요청 사항:
- 기존 온톨로지/DB에 교리 내용을 구조화하여 중복 저장한 부분이 있는지 점검
- RAG로 충분히 대체 가능한 경우, **해당 구조 삭제 또는 단순화 제안**

---

### 3.2 기존 RAG 문서를 활용한 “가상 교리·교범 지식” 생성
본 파일럿은 POC 단계이므로, 실제 군사 교범 전체를 보유하지 않아도 됨.

다음과 같은 방식의 **가상 교리/교범 지식 생성 전략을 검토**해 달라.

- 기존 RAG 문서(작전지침, 보고서, 설명자료 등)를 분석
- LLM을 활용하여 다음 형태의 **가상 교리 문장 생성**
  - “○○ 상황에서는 △△ 방책이 일반적으로 고려됨”
  - “지형이 △△하고 적 전력이 ○○일 경우 방어 우선”
- 생성된 문장을 **RAG용 문서로 재저장**하여 선순환 구조 구성

요청 사항:
- 이러한 “RAG 지식 증강” 구조가 현재 시스템에 적용 가능한지 검토
- 프롬프트 또는 파이프라인 개선 방향 제시

---

## 4. METT-C 외 추가 고려 요소 점검 (RAG vs 구조화 구분)

아래 요소들에 대해 **이미 구현 여부를 우선 분석**하고,
각 요소가 **RAG로 충분한지 / 구조화(Ontology·DB)가 필요한지 구분**해 달라.

---

### 4.1 지휘관 의도 (Commander’s Intent)
- 작전 중점(공세/방어/기동)
- 위험 수용도
- 주공·조공 구분

검토 포인트:
- 서술적 판단 기준 → RAG 적합?
- COA 점수 가중치 → 구조화 필요?

---

### 4.2 교리·규칙 기반 제약 (Doctrine & Constraints)
- 교리 위반 COA 배제
- 무기·부대 운용 제한

검토 포인트:
- 설명·판단 근거 → RAG
- 강제 제약 조건 → 구조화(OWL/Rule)

---

### 4.3 지휘통제 구조 (C2 Relationship)
- OPCON / TACON / ADCON

검토 포인트:
- 규정 설명 → RAG
- 권한 여부 판단 → 구조화 필요

---

### 4.4 인접·연합 부대 고려
- 인접 축선 충돌
- 화력 간섭

검토 포인트:
- 개념 설명 → RAG
- 공간·관계 판단 → 그래프 구조 필요

---

## 5. 아키텍처 및 코드 리팩토링 관점 요청

다음 사항을 **명시적으로 허용**한다.

- 교리·교범을 온톨로지로 과도하게 모델링한 부분 삭제
- RAG 문서 증강을 고려한 파이프라인 개선
- METT-C와 직접 무관한 메타테이블 제거
- SPARQL vs LLM+RAG 역할 분리 명확화

---

## 6. 결과물 요청 형식

아래 형식으로 결과를 제시해 달라.

1. **RAG로 처리하는 것이 적합한 요소**
2. **구조화(Ontology/DB)가 반드시 필요한 요소**
3. **현재 중복 구현된 요소 (삭제/통합 대상)**
4. **RAG 지식 증강(가상 교리 생성) 적용 방안**
5. **COA 추천 Agent 기준 최종 아키텍처 요약**

---

## 7. 핵심 원칙
- 교리·교범은 “지식 근거 제공” 역할 → RAG 중심
- 온톨로지는 “판단 구조와 제약 조건”에 집중
- COA 추천 정확도와 설명가능성을 동시에 만족할 것
- POC 목적에 맞게 과도한 모델링은 지양
